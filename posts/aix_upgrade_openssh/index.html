<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Aix_upgrade_openssh :: GeekLife</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="aix_upgrade_openssh 1. Download the latest available &amp;ldquo;OpenSSL or OpenSSH n.n.n&amp;rdquo; for your AIX version from the following download link 2. Create directory to hold openssl and openssh.
 Example:
% mkdir /tmp/newopenssl
% mkdir /tmp/newopenssh
 3. If /etc/ssh exists before the upgrade of OpenSSH or AIX, make a back up of the directory. Skip steps 3 and 9-10 if OpenSSH is not installed.
 Important Notes
A) If you have an existing ssh configuration, make a copy of the /etc/ssh directory before installing the new ssh to preserve the ssh host keys." />
<meta name="keywords" content=", " />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://blog.geeklife.xyz/posts/aix_upgrade_openssh/" />




<link rel="stylesheet" href="https://blog.geeklife.xyz/assets/style.css">






<link rel="apple-touch-icon" href="https://blog.geeklife.xyz/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://blog.geeklife.xyz/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Aix_upgrade_openssh">
<meta property="og:description" content="AIX系统openssh版本升级" />
<meta property="og:url" content="https://blog.geeklife.xyz/posts/aix_upgrade_openssh/" />
<meta property="og:site_name" content="GeekLife" />

  <meta property="og:image" content="https://blog.geeklife.xyz/">

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-01-02 13:45:08 &#43;0800 CST" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    GeekLife
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://blog.geeklife.xyz/posts/aix_upgrade_openssh/">Aix_upgrade_openssh</a></h1>
  <div class="post-meta">
    
      <span title="2021-01-02T13:45:00&#43;08:00" class="post-date">2021-Jun-02</span>
      
    
    
    <span class="post-word-count"> 536 words</span>
  </div>

  

  
  <span class="post-tags">
    
    #<a href="https://blog.geeklife.xyz/tags/aix/">AIX</a>
    
    #<a href="https://blog.geeklife.xyz/tags/openssh/">openssh</a>
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h2 id="aix_upgrade_openssh">aix_upgrade_openssh<a href="#aix_upgrade_openssh" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>1. Download the latest available &ldquo;OpenSSL or OpenSSH n.n.n&rdquo; for your AIX version from the following
<a href="https://www-01.ibm.com/marketing/iwm/platform/mrs/assets?source=aixbp">download link</a>
2. Create directory to hold openssl and openssh.</p>
<blockquote>
<p>Example:<br>
% mkdir /tmp/newopenssl<br>
% mkdir /tmp/newopenssh</p>
</blockquote>
<p>3. If /etc/ssh exists before the upgrade of OpenSSH or AIX, make a back up of the directory.  Skip steps 3 and 9-10 if OpenSSH is not installed.</p>
<blockquote>
<p>Important Notes<br>
A) If you have an existing ssh configuration, make a copy of the /etc/ssh directory before installing the new ssh to preserve the ssh host keys. If this is a new installation of ssh there will not be an /etc/ssh directory.<br>
% cp -pr /etc/ssh /etc/ssh_backup<br>
B) Read the following technote for details about changes in OpenSSH Version 7.<br>
<a href="https://www.ibm.com/support/pages/ibm-aix-various-ssh-problems-after-upgrading-openssh-7x">https://www.ibm.com/support/pages/ibm-aix-various-ssh-problems-after-upgrading-openssh-7x</a></p>
</blockquote>
<p>4. Prepare the openssl software for installation.</p>
<blockquote>
<p>% cd /tmp/newopenssl
% uncompress
openssl-1.0.2.1801.tar.Z</p>
</blockquote>
<blockquote>
<p>% tar -xvf
openssl-1.0.2.1801.tar
% cd <!-- raw HTML omitted --></p>
</blockquote>
<p>5. Install the openssl software.</p>
<blockquote>
<p>% smitty install_all INPUT device / directory for software [.] &ndash;输入软件所在目录路径<br>
<!-- raw HTML omitted --> * INPUT device / directory for software . * SOFTWARE to install []
&lt;&hellip;.&gt;<br>
Select F4 or esc+4 to list the openssl software.<br>
Select with F7: openssl.base openssl.license openssl.man.en_US
<!-- raw HTML omitted --> ACCEPT new license agreements? yes
<!-- raw HTML omitted --></p>
</blockquote>
<p>6.  Prepare the openssh software for installation.</p>
<blockquote>
<p>% cd 软件存放路径<br>
% uncompress OpenSSH_7.5.102.1801.tar.Z<br>
% tar -xvf OpenSSH_7.5.102.1801.tar</p>
</blockquote>
<p>7. Install the openssh software.</p>
<blockquote>
<p>% cd <!-- raw HTML omitted --><br>
% smitty install_all INPUT device / directory for software [.]
<!-- raw HTML omitted --><br>
*INPUT device / directory for software .<br>
*SOFTWARE to install []
&lt;&hellip;.&gt;
Select F4 or esc+4 to list the openssl software.<br>
Select with F7: openssh.base openssh.license openssh.man.en_US openssh.msg.EN_US openssh.msg.en_US
<!-- raw HTML omitted --> ACCEPT new license agreements? yes
<!-- raw HTML omitted --></p>
</blockquote>
<p>8. If the installation was successful, sshd is now active.</p>
<blockquote>
<p>% lssrc -g sshd
This should result in an &ldquo;active&rdquo; status, indicating it is ready to accept ssh connections</p>
</blockquote>
<blockquote>
<p>NOTE: SSHD is called from /etc/rc.d/rc2.d/Ssshd script at boot up. The Ssshd script is called from the l2 entry in /etc/inittab
&ndash;&gt; l2:2:wait:/etc/rc.d/rc2.d</p>
</blockquote>
<p>9. Update the virtual AIX-rpm package.<br>
Since many Open Source packages rely on OpenSSL, it recommended to run the following command, which will update your virtual AIX-rpm package so the rpm installer will be aware of the new or updated libraries:
% /usr/sbin/updtvpkg<br>
*** Skip steps 10 and 11 if this is a new SSH installation.</p>
<p>10. Restore or update ssh host keys and config files.</p>
<blockquote>
<p>% cd /etc/ssh
Backup the newly installed ssh_config and sshd_config files.
% cp -p ssh_config ssh_config.orig_&lt;today&rsquo;s_date&gt;<br>
% cp -p sshd_config sshd_config.orig_&lt;today&rsquo;s_date&gt;</p>
</blockquote>
<blockquote>
<p>Restore the /etc/ssh_backup host keys directory<br>
% cd /etc/ssh_backup<br>
% cp -pr cp ssh_host_*_key*  /etc/ssh</p>
</blockquote>
<blockquote>
<p>Update (or restore previous) sshd_config and ssh_config files</p>
</blockquote>
<h2 id="it-is-recommended-that-you-use-the-newly-installed-ssh_config-and-sshd_config-files-and-if-there-was-any-customization-of-the-old-files-you-should-manually-add-those-changes-to-the-new-files">**It is recommended that you use the newly installed ssh_config and sshd_config files, and if there was any customization of the old files, you should manually add those changes to the new files.<a href="#it-is-recommended-that-you-use-the-newly-installed-ssh_config-and-sshd_config-files-and-if-there-was-any-customization-of-the-old-files-you-should-manually-add-those-changes-to-the-new-files" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Alternatively (not recommended), you can restore the previous config files:<br>
% cd /etc/ssh_backup<br>
% cp -pr sshd_config ssh_config /etc/ssh</p>
<p>11. Stop and restart sshd to read the updated config files.</p>
<p>To stop sshd from the command line:</p>
<blockquote>
<p>% stopsrc -s sshd
To start sshd from the command line:<br>
% startsrc -s sshd<br>
% lssrc -g sshd</p>
</blockquote>
<p>This should result in an &ldquo;active&rdquo; status, indicating the system is ready to accept ssh connections.</p>
<ul>
<li>aix查看系统中临时补丁命令</li>
</ul>
<blockquote>
<p>emgr -l</p>
</blockquote>
<ul>
<li>aix删除临时补丁命令</li>
</ul>
<blockquote>
<p>emgr -r -L 补丁名称</p>
</blockquote>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="https://blog.geeklife.xyz/posts/first_blog/">
                <span class="button__text">First_blog</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://blog.geeklife.xyz/assets/main.js"></script>
<script src="https://blog.geeklife.xyz/assets/prism.js"></script>







  
</div>

</body>
</html>
